!function(){"use strict";var e=Array.from(document.getElementsByClassName("vidget"));var t,n,l,o,a,s=Array.from(document.querySelectorAll(".add")),r=document.querySelectorAll(".window_modal"),c=Array.from(document.querySelectorAll(".close_task"));function i(e,t){var n=JSON.parse(localStorage.getItem(e));n&&n.forEach((function(l){var o=document.createElement("li");o.className="task",o.innerHTML+='<span class="text">'.concat(l,'</span><button type="button" class="cross">&#10007</button>'),document.getElementsByClassName(t)[0].appendChild(o),o.querySelector(".cross").addEventListener("click",(function(t){t.preventDefault();var l=o.querySelector(".text").textContent;if(n.includes(l)){var a=n.indexOf(l);n.splice(a,1),localStorage.setItem(e,JSON.stringify(n)),window.location.reload()}}))}))}!function(){for(var e=function(e){s[e].addEventListener("click",(function(t){t.preventDefault(),r[e].style.display="block"}))},t=0;t<s.length;t+=1)e(t);for(var n=function(e){c[e].addEventListener("click",(function(){r[e].style.display="none"}))},l=0;l<c.length;l+=1)n(l)}(),function(){for(var e=Array.from(document.getElementsByClassName("add_task")),t=document.querySelectorAll(".window_modal"),n=document.querySelectorAll(".text_task"),l=function(l){e[l].addEventListener("click",(function(e){if(e.preventDefault(),""===n[l].value.trim())alert("Невозможно сохранить пустую задачу!"),t[l].style.display="none";else{t[l].style.display="none";var o=document.querySelectorAll(".column_title")[l];if(localStorage.getItem(o.textContent)){var a=JSON.parse(localStorage.getItem(o.textContent));a.push(n[l].value),localStorage.setItem(o.textContent,JSON.stringify(a))}else{var s=[],r=n[l].value;s.push(r),localStorage.setItem(o.textContent,JSON.stringify(s))}window.location.reload()}}))},o=0;o<e.length;o+=1)l(o)}(),function(){for(var t=0;t<e.length;t+=1)e[t].addEventListener("mouseover",(function(e){e.preventDefault(),e.target.classList.contains("task")&&(e.target.querySelector(".cross").style.display="block")})),e[t].addEventListener("mouseleave",(function(e){e.preventDefault(),e.target.classList.contains("task")&&(e.target.querySelector(".cross").style.display="none")}))}(),l=document.getElementById("vidgets"),o=null,a=null,l.addEventListener("mousedown",(function(e){if(e.target.classList.contains("task")){e.target.style.cursor="grabbing",t=e.target,(n=e.target.cloneNode(!0)).classList.add("dragged"),document.body.appendChild(n),n.style.width="".concat(t.offsetWidth,"px");var l=t.getBoundingClientRect(),s=l.top,r=l.left;o=e.pageY-s,a=e.pageX-r,n.style.left="".concat(r,"px"),n.style.top="".concat(s,"px")}})),l.addEventListener("mousemove",(function(e){e.preventDefault(),t&&(n.style.left="".concat(e.pageX-a,"px"),n.style.top="".concat(e.pageY-o,"px"),t.style.display="none")})),l.addEventListener("mouseup",(function(e){if(e.preventDefault(),t){var l=document.elementFromPoint(e.clientX,e.clientY),o=l.closest(".list"),a=t.closest(".vidget").querySelector(".column_title").textContent;if(o){o.insertBefore(t,l),t.style.display="flex",e.target.style.cursor="auto",n.style.display="none";var s=JSON.parse(localStorage.getItem(a)),r=s.indexOf(t.firstChild.textContent);r>-1&&(s.splice(r,1),localStorage.setItem(a,JSON.stringify(s)));var c=t.firstChild.textContent,i=o.closest(".vidget").querySelector(".column_title").textContent,d=JSON.parse(localStorage.getItem(i)),u=l.querySelector(".text").textContent,f=d.indexOf(u);d&&(0===f?(d.unshift(c),localStorage.setItem(i,JSON.stringify(d))):f>0&&(d.splice(f,0,c),localStorage.setItem(i,JSON.stringify(d))))}t=null,n=null}})),i("TODO","list_todo"),i("IN PROGRESS","list_in_progress"),i("DONE","list_done")}();